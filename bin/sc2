#!/usr/bin/env python3
"""
"""
import shutil
from pathlib import Path


### CONSTANTS ###
D_CONFIG = Path('~/.config/shellcuts').expanduser()
SHELL_DATA = {
    'bash': {'share' : Path('/usr/share/shellcuts/bash'),
             'config' : Path('~/.bashrc').expanduser(),
             'exclude' : ('bashrc.example',
                          'bashmarks-aliases.sh')},
                          
    'zsh': {'share' : Path('/usr/share/shellcuts/zsh'),
            'config' : Path('~/.zshrc').expanduser(),
            'exclude' : ('zshrc.example',
                         'bashmarks-aliases.sh')},

    'fish': {'share' : Path('/usr/share/shellcuts/fish'),
             'config' : Path('~/.config/fish/config.fish').expanduser(),
             'exclude' : ('config.fish.example',
                          'bashmarks-aliases.fish')}
}


### FUNCTIONS ###
def check_home_config_dir():
    """"""
    D_CONFIG.mkdir(parents=True, exist_ok=True)

def check_shell_config(shell):
    """"""
    SHELL_DATA[shell]['config'].touch(exist_ok=True)

def install_share_files(shell):
    """"""
    check_home_config_dir()

    if (D_CONFIG / shell).is_dir():
        shutil.rmtree(str(D_CONFIG / shell))
        
    shutil.copytree(str(SHELL_DATA[shell]['share']),
                    str(D_CONFIG / shell),
                    ignore=shutil.ignore_patterns(*SHELL_DATA[shell]['exclude']))

def modify_shell_config(shell):
    """"""
    check_shell_config(shell)

    F_CONFIG = SHELL_DATA[shell]['share'] / SHELL_DATA[shell]['exclude'][0]
    new_config_text =  (SHELL_DATA[shell]['config'].read_text() + 
                        '\n' +
                        F_CONFIG.read_text())
    SHELL_DATA[shell]['config'].write_text(new_config_text)

modify_shell_config('zsh')
